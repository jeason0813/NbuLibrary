(function(n,t,i){var o={templates:{},storeTemplate:function(n,t){this.templates[n]=t},getTemplate:function(n){return this.templates[n]},purge:function(){this.templates={}}},s={templateIds:[],storeTemplate:function(n,t){var i=document.getElementById(n);i===null&&(this.templateIds.push(n),i=document.createElement("script"),i.type="text/html",i.id=n,document.body.appendChild(i)),i.text=t},getTemplate:function(n){return document.getElementById(n)},purge:function(){for(var n=0;n<this.templateIds.length;n++)document.body.removeChild(document.getElementById(this.templateIds[n]));this.templateIds=[]}},h="<div class='infuser-error'>The template <a href='{TEMPLATEURL}'>{TEMPLATEID}<\/a> could not be loaded. {STATUS}<\/div>",e=function(n,t,i){return h.replace("{STATUS}",n).replace("{TEMPLATEID}",t).replace("{TEMPLATEURL}",i)},u=[],f={getTemplatePath:function(n){var t=n.templatePrefix+n.templateId+n.templateSuffix;return n.templateUrl===i||n.templateUrl===""?t:n.templateUrl+"/"+t},templateGetSuccess:function(n,t){return function(i){r.store.storeTemplate(n,i),t(r.store.getTemplate(n))}},templateGetError:function(t,i,f){return function(o){n.inArray(t,u)===-1&&u.push(t);var s=e("HTTP Status code: "+o.status,t,i);r.store.storeTemplate(t,s),f(r.store.getTemplate(t))}},getAjaxOptions:function(){}},r={storageOptions:{hash:o,script:s},store:o,defaults:{templateUrl:"",templateSuffix:".html",templatePrefix:"",ajax:{async:!0,dataType:"html",type:"GET"},target:function(n){return"#"+n},loadingTemplate:{content:'<div class="infuser-loading">Loading...<\/div>',transitionIn:function(t,i){var r=n(t);r.hide(),r.html(i),r.fadeIn()},transitionOut:function(t){n(t).html("")}},postRender:function(){},preRender:function(){},render:function(t,i){var r=n(t);r.children().length===0?r.append(n(i)):r.children().replaceWith(n(i))},bindingInstruction:function(n){return n},useLoadingTemplate:!0},get:function(t,i){var e=n.extend({},r.defaults,typeof t=="object"?t:{templateId:t}),o;e.ajax.url=f.getTemplatePath(e),o=r.store.getTemplate(e.ajax.url),o&&n.inArray(e.ajax.url,u)===-1?i(o):(e.ajax.success=f.templateGetSuccess(e.ajax.url,i),e.ajax.error=f.templateGetError(e.templateId,e.ajax.url,i),n.trafficCop(e.ajax))},getSync:function(t){var i=n.extend({},r.defaults,typeof t=="object"?t:{templateId:t},{ajax:{async:!1}}),s,o;return i.ajax.url=f.getTemplatePath(i),s=r.store.getTemplate(i.ajax.url),s&&n.inArray(i.ajax.url,u)===-1||(o=null,i.ajax.success=function(n){o=n},i.ajax.error=function(){n.inArray(i.ajax.url)===-1&&u.push(i.ajax.url),o=e("HTTP Status code: exception.status",i.templateId,i.ajax.url)},n.ajax(i.ajax),o===null?o=e("An unknown error occurred.",i.templateId,i.ajax.url):(r.store.storeTemplate(i.ajax.url,o),s=r.store.getTemplate(i.ajax.url))),s},infuse:function(t,u){var f=n.extend({},r.defaults,typeof t=="object"?t:u,typeof t=="string"?{templateId:t}:i),e=typeof f.target=="function"?f.target(t):f.target;f.useLoadingTemplate&&f.loadingTemplate.transitionIn(e,f.loadingTemplate.content),r.get(f,function(n){var t=n;f.preRender(e,t),t=f.bindingInstruction(t,f.model),f.useLoadingTemplate&&f.loadingTemplate.transitionOut(e),f.render(e,t),f.postRender(e)})}};t.infuser=r})(jQuery,window);
//@ sourceMappingURL=infuser.min.js.map